<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Fuentes + estilos base del sitio -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../style.css"><!-- si mueves este archivo a raíz: usar "style.css" -->
  <link rel="stylesheet" href="../css/api-doc-css.css">

  <!-- Swagger UI (CDN) -->
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5/swagger-ui.css">

  <title>Regular Show API – Docs</title>
</head>
<body>

  <!--###################################################-->
  <!------------------------HEADER------------------------->
  <!--###################################################-->
  <div class="header">
    <img src="../img/logoregularshow.png" alt="Regular Show">
  </div>

  <div class="contenedor">
    <!--###################################################-->
    <!--------------------------NAV-------------------------->
    <!--###################################################-->
    <header>
      <nav>
        <ul>
          <li><a href="../index.html">Inicio</a></li>
          <li><a href="api-doc.html">Regular Show API Docs</a></li>
          <li><a href="personajes.html">Personajes</a></li>
          <li><a href="capitulos.html">Capitulos</a></li>
          <!--<li><a href="comics.html">Comics</a></li>-->
          <li><a href="la-pelicula.html">La Pelicula</a></li>                    
          <li><a href="acerca-de.html">Acerca de</a></li>
        </ul>
      </nav>
    </header>

    <!--###################################################-->
    <!-------------------------MAIN-------------------------->
    <!--###################################################-->
    <section class="main">
      <div class="hero-banner">
        <picture>
          <source srcset="../img/Home-Mobile-apidocs.png" media="(max-width: 800px)">
          <img src="../img/Home-Desktop-apidocs.png" alt="Regular Show" loading="lazy">
        </picture>
      </div>

      <section class="posts">
        <section class="hero">
          <h1>Regular Show API – Documentación y Playground</h1>
          <p>
            Explora y prueba los endpoints de la API (cargados desde <code>openapi.json</code>), con ejemplos y
            <strong>Try it out</strong> integrado.
            La API es pública, sin autenticación, y responde en <code>JSON</code>. Ideal para practicar
            consumo de API desde front o backend, esta API esta desarrollada con la idea de poder poner
            en práctica las habilidades de programación y conocimiento básico de APIs REST.
          </p><br>

          <p>
            Todo el contenido esta desarrollado con tal de que no desesperes y puedas disfrutar del proceso de aprendizaje.
            Basta con leer la documentacion, los tips para poder sacar el maximo provecho de la API y jugar con los ejemplos.
          </p><br>

          <div class="intro-image">
            <img src="../img/Skips.png" alt="Skips personaje de Regular Show">
          </div>

          <div class="intro-content">
            <p>
              Así que, si eres un programador novicio o simplemente quieres aprender más sobre el consumo de APIs, te recomiendo
              no entrar en pánico y desesperarte, tomarte con calma y seguir los pasos de la documentación.
            </p>
          </div>

          <article id="tecnologias-api">
            <h2>Tecnologías usadas en esta API</h2>
            <p>Esta API fue desarrollada con un stack moderno y ligero que facilita tanto el despliegue como el consumo:</p>
            <ul class="tech-list">
              <li><b>Python 3.11</b> — lenguaje base del proyecto</li>
              <li><b>FastAPI</b> — framework para crear APIs rápidas y tipadas</li>
              <li><b>Uvicorn</b> — servidor ASGI que ejecuta la aplicación</li>
              <li><b>Pydantic</b> — validación de modelos de datos</li>
              <li><b>JSON estructurado</b> — formato de los datos consumibles</li>
              <li><b>Render</b> — plataforma de hosting y despliegue</li>
            </ul>
          </article>
        </section>

        <section class="api-guide">
          <h1>Regular Show API – Guía rápida de uso</h1>

          <article class="base-url">
            <h2>Base URL</h2>
            <pre><code>https://apiregularshow.onrender.com</code></pre>
          </article>

          <article class="id-formats">
            <h2>Formatos de ID</h2>
            <div class="table-responsive">
              <table>
                <thead>
                  <tr>
                    <th>Recurso</th>
                    <th>Prefijo</th>
                    <th>Ejemplo</th>
                    <th>Notas</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Personajes</td>
                    <td><code>CHARCT</code></td>
                    <td><code>CHARCT001</code></td>
                    <td>IDs alfanuméricos, 3 dígitos con cero a la izquierda</td>
                  </tr>
                  <tr>
                    <td>Capítulos</td>
                    <td><code>CAP</code></td>
                    <td><code>CAP001</code></td>
                    <td>Incluye temporada, número, sinopsis e <code>imdb_score</code></td>
                  </tr>
                  <tr>
                    <td>Temporadas</td>
                    <td><code>TEMP</code></td>
                    <td><code>TEMP01</code></td>
                    <td>Devuelve también <b>numero_capitulos</b> y <b>promedio_imdb</b></td>
                  </tr>
                  <tr>
                    <td>Cómics</td>
                    <td><code>COMC</code></td>
                    <td><code>COMC001</code></td>
                    <td>Campos: autores, ilustradores, tipo, publicación…</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>

          <article class="common-params">
            <h2>Parámetros comunes</h2>
            <dl class="params-list">
              <dt><code>?limit=&lt;n&gt;</code></dt>
              <dd>Cuántos ítems devolver (útil para paginar).</dd>
              <dt><code>?skip=&lt;n&gt;</code></dt>
              <dd>Cuántos ítems omitir desde el inicio (siguiente página).</dd>
            </dl>
            <div class="tip-box">
              <b>Tip:</b> para recorrer páginas usa <code>?limit=20&amp;skip=0</code>, luego <code>?limit=20&amp;skip=20</code>, etc.
            </div>
          </article>

          <article class="endpoints">
            <h2>Endpoints por recurso</h2>

            <section class="endpoint-group">
              <h3>Personajes</h3>
              <ul>
                <li><code>GET /personajes</code> — lista paginada.</li>
                <li><code>GET /personajes/{id}</code> — detalle por ID (p.ej. <code>CHARCT001</code>).</li>
                <li><code>GET /personajes/principales</code> — elenco principal.</li>
                <li><code>GET /personajes/aleatorio/{n}</code> — <em>n</em> personajes aleatorios.</li>
              </ul>
            </section>

            <section class="endpoint-group">
              <h3>Capítulos</h3>
              <ul>
                <li><code>GET /capitulos</code> — lista (campos: <code>id</code>, <code>titulo</code>, <code>numero</code>, <code>temporada</code>, <code>fecha_estreno</code>, <code>imdb_score</code>, <code>sinopsis</code>, <code>imagen_url</code>…)</li>
                <li><code>GET /capitulos/{id}</code> — detalle por ID (p.ej. <code>CAP001</code>).</li>
              </ul>
            </section>

            <section class="endpoint-group">
              <h3>Temporadas</h3>
              <ul>
                <li><code>GET /temporadas</code> — lista con agregados <b>numero_capitulos</b> y <b>promedio_imdb</b>.</li>
                <li><code>GET /temporadas/{id}</code> — detalle por ID (p.ej. <code>TEMP01</code>), con lista de <code>capitulos</code> por ID.</li>
              </ul>
            </section>

            <section class="endpoint-group">
              <h3>Cómics</h3>
              <ul>
                <li><code>GET /comics</code> — lista paginada (campos: <code>id</code>, <code>titulo</code>, <code>tipo</code>, <code>numero_issues</code>, <code>autores</code>, <code>ilustradores</code>, <code>publicacion</code>…)</li>
                <li><code>GET /comics/{id}</code> — detalle por ID (p.ej. <code>COMC001</code>).</li>
              </ul>
            </section>
          </article>

          <article class="recommendations">
            <h2>Recomendaciones de uso</h2>
            <ul class="recommendations-list">
              <li>Para listas largas (ej. capítulos), usa <code>?limit</code> + <code>?skip</code> para paginar.</li>
              <li>El campo <code>imagen_url</code> es externo: respeta el <em>cache</em> del navegador y evita solicitar la misma imagen muchas veces en poco tiempo.</li>
              <li>Si tu cliente es público, enlaza a esta Wiki para crédito y contexto del proyecto.</li>
              <li>Para demos, combina <code>/personajes/aleatorio/{n}</code> con tarjetas visuales; y grafica <code>promedio_imdb</code> por temporada.</li>
            </ul>
          </article>

          <article class="errors">
            <h2>Errores y validación</h2>
            <dl class="error-codes">
              <dt><code>404</code></dt>
              <dd>Recurso no encontrado (ID inexistente).</dd>
              <dt><code>422</code></dt>
              <dd>Validación de parámetros (p.ej., tipos incorrectos).</dd>
              <dt><code>500</code></dt>
              <dd>Error interno.</dd>
            </dl>
            <p>Las respuestas de error salen en JSON con mensaje y, en validación, detalles de campos.</p>
          </article>
        </section>

        <section class="swagger-section">
          <h2>Documentación Interactiva de la API</h2>
          <div class="swagger-wrap page-full">
            <div id="swagger-ui"></div>
          </div>
        </section>

        <section class="support-section">
          <h2>Reporte de errores y avisos</h2>
          <div class="support-content">
            <p>
              Para los avisos de cualquier error o problema, por favor utiliza el canal de soporte correspondiente indicado en el repositorio
              de GitHub de este mismo proyecto. Puedes reportar errores, sugerir mejoras o simplemente comentar sobre el uso de la API.
            </p>
            <div class="support-image">
              <img src="../img/Code.gif" alt="Código animado">
            </div>
            <p><strong>Recuerda:</strong> No dudes en pedir ayuda si la necesitas.</p>
            <p>
              A continuación el repositorio de GitHub para las consultas generales:<br>
              <a href="https://github.com/KPBaldur/ApiRegularShow" target="_blank">https://github.com/KPBaldur/ApiRegularShow</a>
            </p>
          </div>
        </section>
      </section>
    </section>

    <footer>
      <p>Kevin Pizarro 2025 - Todos los Derechos Reservados</p>
    </footer>
  </div>

  
  <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-bundle.js"></script>
  <script>
    const SPEC_URL = "https://apiregularshow.onrender.com/openapi.json";
    window.onload = () => {
      SwaggerUIBundle({
        url: SPEC_URL,
        dom_id: '#swagger-ui',
        deepLinking: true,
        tryItOutEnabled: true,
        displayRequestDuration: true,
        docExpansion: 'none',
        presets: [SwaggerUIBundle.presets.apis],
        layout: "BaseLayout"
      });
    };
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", async () => {
      const targets = document.querySelectorAll("[data-include]");
      await Promise.all([...targets].map(async el => {
        const url = el.getAttribute("data-include");
        try {
          const res = await fetch(url, { cache: "no-cache" });
          el.innerHTML = res.ok ? await res.text() : `<p>No se pudo cargar: ${url}</p>`;
        } catch (e) {
          el.innerHTML = `<p>Error cargando: ${url}</p>`;
          console.error(e);
        }
      }));
    });
  </script>
</body>
</html>
